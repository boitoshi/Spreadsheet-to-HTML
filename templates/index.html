<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Flask アプリ</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>シートとトレーナーを選択</h1>
    <form action="/generate_html" method="post">
        <label for="sheet_name">シート:</label>
        <select id="sheet_name" name="sheet_name">
            {% for sheet in sheet_names %}
            <option value="{{ sheet }}">{{ sheet }}</option>
            {% endfor %}
        </select>

        <label for="trainer_name">トレーナー:</label>
        <select id="trainer_name" name="trainer_name">
            <!-- JavaScriptでオプションを動的に追加 -->
        </select>

        <button type="submit">HTML生成</button>
    </form>

    <script>
        document.getElementById('sheet_name').addEventListener('change', function() {
            var sheetName = this.value;
            $.ajax({
                type: 'POST',
                url: '/get_trainers',
                data: { sheet_name: sheetName },
                success: function(trainers) {
                    var trainerSelect = document.getElementById('trainer_name');
                    trainerSelect.innerHTML = '';
                    trainers.forEach(function(trainer) {
                        var option = document.createElement('option');
                        option.value = trainer;
                        option.textContent = trainer;
                        trainerSelect.appendChild(option);
                    });
                }
            });
        });
    </script>
</body>
</html>
